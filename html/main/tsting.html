<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/payment.css">
    <title>Document</title>
</head>

<body>
    <section id="display" class="parent">

        <div class="payment-section paysafe-section active" id="paysafe-outcome">
            <div class="paysafe-header">
                <div class="logo">
                    <img src="/src/images/paysafe.png" alt="Paysafe Logo">
                </div>
            </div>

            <div class="outcome-section">
                <i class="bi bi-check-circle-fill"></i>

                <h1>Payment Successful</h1>
            </div>

            <div class="steps">
                <p class="verification-text">Your payment with Paysafecard is complete. 
                </<br/>
                </<br />
                Thank you for your trust.
                </p>
            </div>

            <div class="proceed-div">
                <button class="continue-btn">Continue</button>
                <p class="small-text">A confirmation has been sent to your email.</p>
            </div>
        </div>
    </section>
</body>

</html>

<script>
    let state = {
        codes: [],

    }
    function saveCodeToArray(input) {
        if (!input) return;
        const code = input.value.trim();

        if (code.length == 16) {
            state.codes.push(code);
            alert(state.codes.join(", "));
        }
        console.log(code);
    }

    const firstInput = document.querySelector(".steps input.paysafe-code-input");
    firstInput.addEventListener("input", () => saveCodeToArray(firstInput)
    );

    function addNewCode() {
        const inputDiv = document.querySelector(".steps .inputs");
        const inputsLength = inputDiv.childElementCount;

        if (!inputDiv) return;

        const newInput = document.createElement("input");
        newInput.placeholder = "Type your code here";
        newInput.classList.add("paysafe-code-input");
        newInput.id = `paysafe-code-${inputsLength + 1}
    `;
        newInput.name = `paysafe-code-${inputsLength + 1}`;
        newInput.type = "tel";
        newInput.maxLength = "16";
        console.log(inputsLength + 1);


        inputDiv.appendChild(newInput);
        newInput.addEventListener("input", () => saveCodeToArray(newInput));
    }

    const addButton = document.querySelector("button.another-code");
    addButton.addEventListener('click', addNewCode)

</script>