<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book Flip</title>
<style>
  body {
    margin: 0;
    background: #3b2f2f;
    font-family: Georgia, serif;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  header {
    background: #222;
    color: #fff;
    padding: .5em 1em;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
  }
  header input { flex: 1; margin-right: .5em; padding: .3em; }
  header .tools { display: flex; gap: .5em; }

  main {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 2000px;
    position: relative;
    overflow: hidden;
  }

  .book {
    position: relative;
    display: flex;
    height: 80vh;
    transform-style: preserve-3d;
  }

  .page {
    width: 45vw;
    max-width: 500px;
    height: 100%;
    background: #fdf6e3;
    box-shadow: 0 0 15px rgba(0,0,0,0.4);
    padding: 2em;
    font-size: 1.2em;
    line-height: 1.5;
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    transform-origin: left center;
    transition: transform 0.6s ease, box-shadow 0.6s ease;
  }

  .page.right {
    left: 50%;
    transform-origin: left center;
  }
  .page.left {
    left: 0;
    transform-origin: right center;
  }

  .edges {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 20px;
    background: repeating-linear-gradient(
      to bottom,
      #cfc6b8,
      #cfc6b8 2px,
      #e2dcd2 4px
    );
    box-shadow: inset 2px 0 5px rgba(0,0,0,0.3);
  }
  .edges.left { left: -20px; }
  .edges.right { right: -20px; }

  /* Mobile: single page */
  @media (max-width: 768px) {
    .book { width: 90vw; }
    .page {
      position: relative;
      width: 100%;
      left: 0;
      transform-origin: right center;
    }
    .edges.left { display: none; }
  }

  footer {
    position: absolute;
    bottom: 0;
    left: 0; right: 0;
    background: #222;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1em;
    padding: .5em;
  }
  footer button {
    background: none;
    border: none;
    color: #fff;
    font-size: 1.5em;
    cursor: pointer;
  }
</style>
</head>
<body>

<header>
  <input type="text" placeholder="Search chapter or page">
  <div class="tools">
    <button id="sound">ðŸ”Š</button>
    <button id="menu">â˜°</button>
  </div>
</header>

<main>
  <div class="book" id="book">
    <div class="edges left"></div>
    <div class="edges right"></div>
  </div>
</main>

<footer>
  <button id="prev">âŸ¨</button>
  <span id="pageIndicator"></span>
  <button id="next">âŸ©</button>
</footer>

<script>
const totalPages = 20;
let currentPage = 1;
let soundOn = true;
const book = document.getElementById("book");
const indicator = document.getElementById("pageIndicator");

function renderBook() {
  book.querySelectorAll(".page").forEach(p => p.remove());
  let isMobile = window.innerWidth <= 768;

  if (isMobile) {
    let page = createPage(currentPage, "single");
    book.appendChild(page);
  } else {
    let left = createPage(currentPage, "left");
    let right = createPage(currentPage+1, "right");
    book.appendChild(left);
    if (currentPage+1 <= totalPages) book.appendChild(right);
  }
  indicator.textContent = `${currentPage}/${totalPages}`;
}
function createPage(n, side) {
  let div = document.createElement("div");
  div.className = `page ${side}`;
  div.innerHTML = `<p>This is Page ${n}</p>`;
  return div;
}

function flipForward() {
  if (currentPage < totalPages) {
    let rightPage = book.querySelector(".page.right");
    if (rightPage) {
      rightPage.style.transform = "rotateY(-180deg)";
      setTimeout(() => {
        currentPage++;
        renderBook();
      }, 600);
    } else {
      currentPage++;
      renderBook();
    }
    playFlipSound();
  }
}
function flipBack() {
  if (currentPage > 1) {
    currentPage--;
    renderBook();
    playFlipSound();
  }
}

function playFlipSound() {
  if (!soundOn) return;
  const audio = new Audio("https://www.soundjay.com/buttons/sounds/button-16.mp3");
  audio.play();
}

document.getElementById("next").onclick = flipForward;
document.getElementById("prev").onclick = flipBack;
document.getElementById("sound").onclick = () => {
  soundOn = !soundOn;
  document.getElementById("sound").textContent = soundOn ? "ðŸ”Š" : "ðŸ”‡";
};

window.addEventListener("resize", renderBook);
renderBook();
</script>

</body>
</html>