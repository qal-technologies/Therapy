<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compagnon Féminin - View Book</title>
    <style>
        :root {
            --primary-color: #f5e6e8;
            --secondary-color: #d4a5a5;
            --text-color: #333;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --book-width: 800px;
            --book-height: 600px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Georgia', serif;
        }

        body {
            background-color: #f9f3f3;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .search-container {
            flex: 1;
            display: flex;
            max-width: 400px;
            min-width: 200px;
        }

        .search-container input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--secondary-color);
            border-radius: 20px;
            font-size: 16px;
            outline: none;
            background-color: white;
        }

        .tools {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sound-toggle, .menu-toggle {
            cursor: pointer;
            font-size: 20px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .sound-toggle:hover, .menu-toggle:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .menu-items {
            display: none;
            position: absolute;
            right: 20px;
            top: 60px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px var(--shadow-color);
            padding: 10px;
            z-index: 100;
            flex-direction: column;
            gap: 10px;
            min-width: 180px;
        }

        .menu-items.show {
            display: flex;
        }

        .menu-item {
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .menu-item:hover {
            background-color: #f0f0f0;
        }

        .book-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 2000px;
            margin: 20px 0;
        }

        .book {
            position: relative;
            width: var(--book-width);
            height: var(--book-height);
            transition: transform 0.5s;
            transform-style: preserve-3d;
        }

        .book-cover {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: var(--primary-color);
            border: 1px solid var(--secondary-color);
            box-shadow: 0 10px 30px var(--shadow-color);
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
            transform-origin: left center;
            transform: rotateY(0deg);
            transition: transform 1s;
            z-index: 10;
        }

        .book-cover h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #8b5a5a;
        }

        .book-cover p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .open-book-btn {
            padding: 10px 20px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .open-book-btn:hover {
            background-color: #c28e8e;
        }

        .book-content {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            display: none;
        }

        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 40px;
            overflow-y: auto;
            backface-visibility: hidden;
            transform-origin: left center;
            transition: transform 1s;
            z-index: 1;
        }

        .page-left {
            left: 0;
            border-right: 1px solid #eee;
        }

        .page-right {
            right: 0;
            border-left: 1px solid #eee;
        }

        .page-content {
            height: 100%;
            overflow-y: auto;
        }

        .page h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #8b5a5a;
        }

        .page p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .page hr {
            border: none;
            border-top: 1px solid #eee;
            margin: 20px 0;
        }

        .footer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 15px;
            color: var(--secondary-color);
            transition: color 0.2s;
        }

        .nav-btn:hover {
            color: #8b5a5a;
        }

        .page-indicator {
            font-size: 16px;
            min-width: 80px;
            text-align: center;
        }

        .bottom-tools {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 0 20px;
        }

        .tool-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            color: var(--secondary-color);
            transition: color 0.2s;
        }

        .tool-btn:hover {
            color: #8b5a5a;
        }

        .zoom-controls {
            display: flex;
            gap: 5px;
        }

        .bookmark-btn.active {
            color: gold;
        }

        /* Page flip animation */
        .page.flipping {
            z-index: 100;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.2);
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            :root {
                --book-width: 100%;
                --book-height: 70vh;
            }

            .book {
                width: 100%;
                height: 70vh;
            }

            .page {
                width: 100%;
                padding: 20px;
            }

            .page-left, .page-right {
                border: none;
            }

            .menu-items {
                top: 50px;
                right: 10px;
            }

            .footer {
                gap: 10px;
            }

            .bottom-tools {
                padding: 0 10px;
            }
        }

        /* Full screen mode */
        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            z-index: 1000;
            padding: 0;
            margin: 0;
        }

        .fullscreen .header, .fullscreen .footer {
            padding: 10px 20px;
            background-color: white;
            z-index: 1001;
        }

        .fullscreen .book-container {
            height: calc(100vh - 120px);
            margin: 0;
        }

        .fullscreen-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            z-index: 1002;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="search-container">
            <input type="text" placeholder="Compagnon Féminin" id="search-input">
        </div>
        <div class="tools">
            <div class="sound-toggle" id="sound-toggle">🔊</div>
            <div class="menu-toggle" id="menu-toggle">☰</div>
            <div class="menu-items" id="menu-items">
                <div class="menu-item" id="fullscreen-btn">
                    <span>⛶</span> Full Screen
                </div>
                <div class="menu-item" id="bookmark-menu">
                    <span>🔖</span> Bookmarks
                </div>
                <div class="menu-item" id="zoom-in-menu">
                    <span>➕</span> Zoom In
                </div>
                <div class="menu-item" id="zoom-out-menu">
                    <span>➖</span> Zoom Out
                </div>
                <div class="menu-item" id="goto-page-menu">
                    <span>#</span> Go to Page
                </div>
            </div>
        </div>
    </div>

    <div class="book-container">
        <div class="book" id="book">
            <div class="book-cover" id="book-cover">
                <h1>Compagnon Féminin</h1>
                <p>Charlotte Casiraghi</p>
                <button class="open-book-btn" id="open-book-btn">Open Book</button>
            </div>
            <div class="book-content" id="book-content">
                <!-- Pages will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="bottom-tools">
            <button class="tool-btn bookmark-btn" id="bookmark-btn">🔖</button>
            <div class="nav-controls">
                <button class="nav-btn" id="prev-btn">❮</button>
                <span class="page-indicator" id="page-indicator">1/10</span>
                <button class="nav-btn" id="next-btn">❯</button>
            </div>
            <div class="zoom-controls">
                <button class="tool-btn" id="zoom-out-btn">➖</button>
                <button class="tool-btn" id="zoom-in-btn">➕</button>
            </div>
        </div>
    </div>

    <audio id="page-turn-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-book-pages-turn-1561.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Book content
            const bookPages = [
                {
                    left: `
                        <h2>Introduction—You Are Alone</h2>
                        <p>Do you feel invisible? Overwhelmed by sadness when you wake up? Lonely even in a crowd? Heartbroken or struggling in your relationships?</p>
                        <p>You are not alone.</p>
                    `,
                    right: `
                        <p>In this book, you will find a journey toward healing and happiness, beginning with rich experiences and shared wisdom.</p>
                        <hr>
                        <p><strong>Through trials and transformation, you will discover your worth and learn to embrace change.</strong></p>
                    `
                },
                {
                    left: `
                        <h2>Chapter 1: Understanding Loneliness</h2>
                        <p>Loneliness is not about being alone; it's about feeling disconnected even when surrounded by people.</p>
                        <p>Many women experience this profound sense of isolation, especially in today's fast-paced world.</p>
                    `,
                    right: `
                        <p>The first step to overcoming loneliness is recognizing it for what it is—a signal from your soul that something needs to change.</p>
                        <hr>
                        <p>In the following chapters, we'll explore practical ways to reconnect with yourself and others.</p>
                    `
                },
                {
                    left: `
                        <h2>Chapter 2: The Power of Self-Love</h2>
                        <p>Before you can truly connect with others, you must first connect with yourself.</p>
                        <p>Self-love is not selfish; it's the foundation of all healthy relationships.</p>
                    `,
                    right: `
                        <p>Practice daily affirmations, set healthy boundaries, and make time for activities that nourish your soul.</p>
                        <hr>
                        <p>Remember: You cannot pour from an empty cup. Prioritize your own well-being.</p>
                    `
                },
                {
                    left: `
                        <h2>Chapter 3: Building Meaningful Connections</h2>
                        <p>Quality relationships require intention and effort.</p>
                        <p>Seek out people who share your values and inspire you to grow.</p>
                    `,
                    right: `
                        <p>Be vulnerable, listen deeply, and show up authentically in your relationships.</p>
                        <hr>
                        <p>True connection happens when we let go of perfection and embrace our imperfect humanity.</p>
                    `
                }
            ];

            // DOM elements
            const book = document.getElementById('book');
            const bookCover = document.getElementById('book-cover');
            const bookContent = document.getElementById('book-content');
            const openBookBtn = document.getElementById('open-book-btn');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const pageIndicator = document.getElementById('page-indicator');
            const bookmarkBtn = document.getElementById('bookmark-btn');
            const zoomInBtn = document.getElementById('zoom-in-btn');
            const zoomOutBtn = document.getElementById('zoom-out-btn');
            const soundToggle = document.getElementById('sound-toggle');
            const menuToggle = document.getElementById('menu-toggle');
            const menuItems = document.getElementById('menu-items');
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            const pageTurnSound = document.getElementById('page-turn-sound');
            const searchInput = document.getElementById('search-input');

            // State variables
            let currentPage = 0;
            let totalPages = bookPages.length;
            let isSoundOn = true;
            let isBookOpen = false;
            let isFullscreen = false;
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];
            let fontSize = 16;

            // Initialize the book
            function initBook() {
                bookContent.innerHTML = '';
                
                bookPages.forEach((page, index) => {
                    const pageContainer = document.createElement('div');
                    pageContainer.className = 'page-container';
                    
                    const leftPage = document.createElement('div');
                    leftPage.className = 'page page-left';
                    leftPage.innerHTML = `<div class="page-content">${page.left}</div>`;
                    leftPage.dataset.pageNumber = index * 2;
                    
                    const rightPage = document.createElement('div');
                    rightPage.className = 'page page-right';
                    rightPage.innerHTML = `<div class="page-content">${page.right}</div>`;
                    rightPage.dataset.pageNumber = index * 2 + 1;
                    
                    pageContainer.appendChild(leftPage);
                    pageContainer.appendChild(rightPage);
                    bookContent.appendChild(pageContainer);
                });
                
                updatePageIndicator();
                checkBookmarkStatus();
                loadFontSize();
            }

            // Open the book
            function openBook() {
                bookCover.style.transform = 'rotateY(-160deg)';
                setTimeout(() => {
                    bookCover.style.display = 'none';
                    bookContent.style.display = 'block';
                    isBookOpen = true;
                }, 500);
            }

            // Close the book
            function closeBook() {
                bookCover.style.display = 'flex';
                bookCover.style.transform = 'rotateY(0deg)';
                bookContent.style.display = 'none';
                isBookOpen = false;
                currentPage = 0;
                updatePageIndicator();
            }

            // Update page indicator
            function updatePageIndicator() {
                const displayPage = Math.floor(currentPage / 2) + 1;
                pageIndicator.textContent = `${displayPage}/${totalPages}`;
            }

            // Go to previous page
            function goToPrevPage() {
                if (currentPage > 0) {
                    currentPage--;
                    playPageTurnSound();
                    updatePageIndicator();
                    checkBookmarkStatus();
                    saveCurrentPage();
                }
            }

            // Go to next page
            function goToNextPage() {
                if (currentPage < totalPages * 2 - 1) {
                    currentPage++;
                    playPageTurnSound();
                    updatePageIndicator();
                    checkBookmarkStatus();
                    saveCurrentPage();
                }
            }

            // Go to specific page
            function goToPage(pageNum) {
                if (pageNum >= 0 && pageNum < totalPages * 2) {
                    currentPage = pageNum;
                    playPageTurnSound();
                    updatePageIndicator();
                    checkBookmarkStatus();
                    saveCurrentPage();
                }
            }

            // Play page turn sound
            function playPageTurnSound() {
                if (isSoundOn) {
                    pageTurnSound.currentTime = 0;
                    pageTurnSound.play().catch(e => console.log("Audio play failed:", e));
                }
            }

            // Toggle sound
            function toggleSound() {
                isSoundOn = !isSoundOn;
                soundToggle.textContent = isSoundOn ? '🔊' : '🔇';
                localStorage.setItem('soundPreference', isSoundOn ? 'on' : 'off');
            }

            // Toggle bookmark
            function toggleBookmark() {
                const pageNum = currentPage;
                const index = bookmarks.indexOf(pageNum);
                
                if (index === -1) {
                    bookmarks.push(pageNum);
                    bookmarkBtn.classList.add('active');
                } else {
                    bookmarks.splice(index, 1);
                    bookmarkBtn.classList.remove('active');
                }
                
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            }

            // Check if current page is bookmarked
            function checkBookmarkStatus() {
                bookmarkBtn.classList.toggle('active', bookmarks.includes(currentPage));
            }

            // Zoom in text
            function zoomIn() {
                if (fontSize < 24) {
                    fontSize += 2;
                    document.querySelectorAll('.page-content').forEach(content => {
                        content.style.fontSize = `${fontSize}px`;
                    });
                    localStorage.setItem('fontSize', fontSize);
                }
            }

            // Zoom out text
            function zoomOut() {
                if (fontSize > 12) {
                    fontSize -= 2;
                    document.querySelectorAll('.page-content').forEach(content => {
                        content.style.fontSize = `${fontSize}px`;
                    });
                    localStorage.setItem('fontSize', fontSize);
                }
            }

            // Load saved font size
            function loadFontSize() {
                const savedSize = localStorage.getItem('fontSize');
                if (savedSize) {
                    fontSize = parseInt(savedSize);
                    document.querySelectorAll('.page-content').forEach(content => {
                        content.style.fontSize = `${fontSize}px`;
                    });
                }
            }

            // Toggle fullscreen
            function toggleFullscreen() {
                if (!isFullscreen) {
                    document.documentElement.requestFullscreen().catch(e => {
                        console.log("Fullscreen error:", e);
                    });
                    document.body.classList.add('fullscreen');
                } else {
                    document.exitFullscreen();
                    document.body.classList.remove('fullscreen');
                }
                isFullscreen = !isFullscreen;
            }

            // Save current page to localStorage
            function saveCurrentPage() {
                localStorage.setItem('currentPage', currentPage);
            }

            // Load current page from localStorage
            function loadCurrentPage() {
                const savedPage = localStorage.getItem('currentPage');
                if (savedPage !== null) {
                    currentPage = parseInt(savedPage);
                    updatePageIndicator();
                    checkBookmarkStatus();
                }
            }

            // Search functionality
            function searchBook(query) {
                query = query.toLowerCase();
                // Simple search implementation - in a real app you'd want more sophisticated search
                for (let i = 0; i < bookPages.length; i++) {
                    const page = bookPages[i];
                    const pageText = (page.left + page.right).toLowerCase();
                    if (pageText.includes(query)) {
                        goToPage(i * 2);
                        break;
                    }
                }
            }

            // Event listeners
            openBookBtn.addEventListener('click', openBook);
            prevBtn.addEventListener('click', goToPrevPage);
            nextBtn.addEventListener('click', goToNextPage);
            bookmarkBtn.addEventListener('click', toggleBookmark);
            zoomInBtn.addEventListener('click', zoomIn);
            zoomOutBtn.addEventListener('click', zoomOut);
            soundToggle.addEventListener('click', toggleSound);
            menuToggle.addEventListener('click', () => {
                menuItems.classList.toggle('show');
            });

            // Menu item event listeners
            fullscreenBtn.addEventListener('click', toggleFullscreen);
            document.getElementById('bookmark-menu').addEventListener('click', toggleBookmark);
            document.getElementById('zoom-in-menu').addEventListener('click', zoomIn);
            document.getElementById('zoom-out-menu').addEventListener('click', zoomOut);
            document.getElementById('goto-page-menu').addEventListener('click', () => {
                const pageNum = prompt(`Enter page number (1-${totalPages}):`);
                if (pageNum && !isNaN(pageNum)) {
                    const num = parseInt(pageNum);
                    if (num >= 1 && num <= totalPages) {
                        goToPage((num - 1) * 2);
                    }
                }
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!menuToggle.contains(e.target) && !menuItems.contains(e.target)) {
                    menuItems.classList.remove('show');
                }
            });

            // Fullscreen change event
            document.addEventListener('fullscreenchange', () => {
                isFullscreen = !!document.fullscreenElement;
                document.body.classList.toggle('fullscreen', isFullscreen);
            });

            // Search input event
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    searchBook(searchInput.value);
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (!isBookOpen) return;
                
                if (e.key === 'ArrowLeft') {
                    goToPrevPage();
                } else if (e.key === 'ArrowRight') {
                    goToNextPage();
                }
            });

            // Load saved preferences
            function loadPreferences() {
                const soundPref = localStorage.getItem('soundPreference');
                if (soundPref === 'off') {
                    isSoundOn = false;
                    soundToggle.textContent = '🔇';
                }
                
                loadCurrentPage();
            }

            // Initialize
            initBook();
            loadPreferences();
        });
    </script>
</body>
</html>